<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Edit Job {{ job_id }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta name="csrf-token" content="{{ csrf_token() }}">
</head>
<body>
    <div id="progress-container" style="display:none">
        <div id="progress-bar"></div>
    </div>
    <div id="status-message"></div>
    <h2>Edit Job {{ job_id }}</h2>
    <a href="{{ url_for('history') }}">Back</a>
    <button type="button" onclick="adminGenerateAllJSON()">Generate JSON For All</button>
    <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        <label>Job Name:
            <input type="text" name="job_name" value="{{ job_name }}">
        </label>
        {% for r in rows %}
        <h3>{{ r.filename }}</h3>
        <label>Prompt:<br>
            <textarea name="prompt_{{ r.id }}" rows="4" cols="80">{{ r.prompt }}</textarea>
        </label><br>
        <label>Output:<br>
            <textarea name="output_{{ r.id }}" rows="10" cols="80">{{ r.output }}</textarea>
        </label>
        <br>
        <label>JSON:<br>
            <textarea name="json_{{ r.id }}" rows="10" cols="80">{{ r.json }}</textarea>
        </label>
        <button type="button" data-json-id="{{ r.id }}" onclick="adminGenerateJSON({{ r.id }})">Generate JSON</button>
        <button type="button" onclick="prettyPrintTextarea('json_{{ r.id }}')">Pretty Print JSON</button>
        <hr>
        {% endfor %}
        <button type="submit">Save</button>
    </form>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
